@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title System Sequence Diagram (SSD) - Register Vehicle (US006)

autonumber

'hide footbox
actor "Vehicle and Equipment Fleet Manager (VFM)" as VFM
participant ":RegisterVehicleUI" as UI
participant ":RegisterVehicleController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "brandRepository:\nBrandRepository" as BrandRepository
participant "vehicleRepository:\nVehicleRepository" as VehicleRepository
participant "vehicle\n:Vehicle" as VEI

activate VFM

    VFM -> UI : requests to register a vehicle
    activate UI

                UI -> CTRL** : create


        UI -> VFM : requests vehicle data (VIN, Vehicle Platte, Tare Weight, Gross Weight, Current Km, Acquisition Date, Maintenance Frequency)
    deactivate UI

    VFM -> UI : types vehicle data
    activate UI

        UI -> CTRL : submitVehicleData(VIN, Vehicle Platte, Tare Weight, Gross Weight, Current Km, Acquisition Date, Maintenance Frequency)
                activate CTRL

                    CTRL -> VEI : validateVehicleData(VIN)
                    activate VEI

                        VEI -> VEI : validateVehicleData(VIN)

                        |||

                        VEI -> VEI : validateVehicleData(VIN)
                        activate VEI

                        VEI --> VEI
                        deactivate VEI

                    VEI -> CTRL : vehicleData
                    deactivate VEI

        CTRL -> UI : keep vehicleData(VIN, Vehicle Platte, Tare Weight, Gross Weight, Current Km, Acquisition Date, Maintenance Frequency)
        deactivate CTRL

        UI -> CTRL : getBrand()
        activate CTRL

         ref over CTRL, RepositorySingleton, PLAT, BrandRepository
                    Get Brand List

                end ref

            CTRL --> UI : brandList
        deactivate CTRL

    UI -> VFM : show brand list and request to select more vehicleData(Brand, Model)
    deactivate UI

    VFM -> UI : select vehicle data
    activate UI

        UI -> VFM : shows all data and requests confirmation
    deactivate UI

    VFM -> UI : submit data
    activate UI

        UI -> CTRL : registerVehicle(VIN, Brand, Model, Vehicle Platte, Tare Weight, Gross Weight, Current Km, Acquisition Date, Maintenance Frequency)
        activate CTRL

         ref over CTRL, RepositorySingleton, PLAT, BrandRepository
                    Get Model By Brand

                end ref

            deactivate BrandRepository

         CTRL --> CTRL : (brand)

         CTRL -> VehicleRepository: registerVehicle(VIN, Brand, Model, Vehicle Platte, Tare Weight, Gross Weight, Current Km, Acquisition Date, Maintenance Frequency)
         activate VehicleRepository

            |||

                ref over VehicleRepository, VEI
                                Register Vehicle

                end ref
         VehicleRepository --> CTRL: vehicle
         deactivate VehicleRepository

         deactivate BrandRepository

            CTRL -> UI: vehicle
        deactivate CTRL

        UI --> VFM : shows success message
    deactivate UI

deactivate VFM

@enduml
