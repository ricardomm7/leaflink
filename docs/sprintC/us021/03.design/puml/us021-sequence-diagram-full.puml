
@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false


autonumber

actor "GSM" as GSM
participant ":RegisterToDoEntryUI" as UI
participant ":RegisterToDoController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "greenSpaceRepository:\nGreenSpaceRepository" as GreenSpaceRepository
participant "entryRepository\n:EntryRepository" as EntryRep
participant "entry" as Entry
participant "greenSpaceMapper\n:GreenSpaceMapper" as GreenSpaceMapper
participant "greenSpaceDto\n:GreenSpaceDto" as GreenSpaceDTO

activate GSM

    GSM -> UI : asks to add a new entry
    activate UI


        UI -> CTRL** : create
        activate CTRL
        deactivate UI

        CTRL -> RepositorySingleton : getInstance()
        activate RepositorySingleton


        RepositorySingleton --> CTRL : repositories
        deactivate RepositorySingleton

        CTRL -> PLAT :getGreenSpaceRepository
        activate PLAT


        PLAT --> CTRL : GreenSpaceRepository
        deactivate PLAT

         CTRL -> PLAT : getEntryRepository()
        activate PLAT

        PLAT --> CTRL : entryRepository
        deactivate PLAT
        deactivate CTRL

        UI -> CTRL : getGreenSpacesDto
        activate UI
        activate CTRL




        CTRL -> GreenSpaceRepository : getGreenSpaceList()
        deactivate CTRL
        activate GreenSpaceRepository

        GreenSpaceRepository --> CTRL : greenSpaceList
        deactivate GreenSpaceRepository
        activate CTRL

        CTRL -> GreenSpaceMapper: toDtoList(greenSpaceList)
        activate GreenSpaceMapper

        loop

        GreenSpaceMapper -> GreenSpaceDTO** : create
        activate GreenSpaceDTO
        deactivate GreenSpaceMapper

        GreenSpaceDTO --> GreenSpaceMapper: greenSpaceDto
        deactivate GreenSpaceDTO
        activate GreenSpaceMapper
        end loop

        GreenSpaceMapper --> CTRL: greenSpaceListDto
        deactivate GreenSpaceMapper

        CTRL --> UI : greenSpaceListDto
        deactivate CTRL


        UI --> GSM : displays list of green spaces
        deactivate UI

        GSM -> UI : Selects the green space
        activate UI

        UI --> GSM : requests entry data (description, degree of urgency, and approximate expected duration)
        deactivate UI

        GSM -> UI : types requested data
        activate UI

        UI -> CTRL : createEntry(greenSpace, description, degree of urgency, approximate expected duration)
        deactivate UI
        activate CTRL

        CTRL -> EntryRep : createEntry(greenSpace, description, degree of urgency, approximate expected duration)
        deactivate CTRL
        activate EntryRep

        EntryRep -> Entry** : createEntry(greenSpace, description, degree of urgency, approximate expected duration)
        deactivate EntryRep
        activate Entry

        Entry -> Entry : verifyFilled(description)
        activate Entry

        Entry -> Entry : verifyDuration(aproxExpDuration)
        activate Entry

        Entry --> Entry
        deactivate Entry

        Entry --> Entry
        deactivate Entry

        Entry -> EntryRep : Entry
        deactivate Entry
        activate EntryRep

        EntryRep --> CTRL : Entry
        deactivate EntryRep
        activate CTRL

        CTRL --> UI : Entry
        deactivate CTRL
        activate UI

    UI --> GSM : displays success message (Entry registered successfully)
    deactivate UI

deactivate GSM

@enduml
